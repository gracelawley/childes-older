---
title: 'CHILDES: Standardizing Capitalized Words & Phrases'
author: "Grace Lawley"
date: "8/3/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("00_setup.R")
```


Loading filtered utterances, raw utterances, and processed cmu-dict
```{r loading_data}
fil_in_path <- here("data/processed/childes/all_filtered-utterances.csv")
cmu_in_path <- here("data/processed/ref-corpora/cmu-dict-0.7b_proc.csv")

fil_utts <- read_csv(fil_in_path) # filtered utterances
cmu <- read_csv(cmu_in_path) # processed cmu-dict
```


Removing unneeded columns from `utts` with corpora metadata and only keeping the `utterance` column. Then tokenizing the utterances with tokens being split on **white space**
```{r}
tokens <- fil_utts %>% 
  select(utterance) %>% 
  unnest_tokens(output = word, input = utterance, token = "regex", 
                pattern = "[:space:]", to_lower = FALSE) 
```

Removing unneeded columns from `utts` with corpora metadata and only keeping the `utterance` column. Then tokenizing the utterances with tokens being split on **white space**
```{r}
tokens <- fil_utts %>% 
  select(utterance) %>% 
  unnest_tokens(output = word, input = utterance, token = "regex", 
                pattern = "[:space:]", to_lower = FALSE) 
```


Filtering for only rows where `word` contains at least one capital letter.
```{r}
types_w_upper <- tokens %>% 
  filter(str_detect(word, "[:upper:]")) %>% 
  count(word, sort = TRUE)
```

```{r}
exceptions <- c("I", "I'm", "I'll", "I'd", "I've")

types_w_upper <- types_w_upper %>% 
  mutate(lowercase = str_to_lower(word))

in_cmu <- types_w_upper %>% 
  semi_join(cmu, by = c("lowercase" = "entry")) %>% 
  select(lowercase)

not_cmu <- types_w_upper %>% 
  anti_join(cmu, by = c("lowercase" = "entry")) %>% 
  select(lowercase)

```



